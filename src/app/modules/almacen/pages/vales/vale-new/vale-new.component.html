<div class="container">
  <div class="m-3">
    <div class="row justify-content-md-center">
      <div class="col-md-12">
        <div class="card shadow p-3 mb-4 bg-body rounded">
          <div class="card-header">
            <h3 class="card-title">Crear Vale</h3>
          </div>

          <!-- /.card-header -->
          <div class="card-body">
            <div class="row">
              <div class="col-md">
                <form
                  (ngSubmit)="crearVale(createForm.value)"
                  [formGroup]="createForm"
                >
                  <div class="input-group mb-1">
                    <span class="input-group-text izq" id="idProducto"
                      ><b> Articulo *</b></span
                    >
                    <select
                      id="idProducto"
                      formControlName="idProducto"
                      class="form-select"
                    >
                      <!-- <option value="2023" [defaultSelected]="true">2023</option> -->
                      <option value="6439b82156cc6b00132c9ab2">Diesel</option>
                      <option value="642c3e7b3b1ac20013da2571">Gasolina</option>
                    </select>

                    <div
                      class="form-text"
                      *ngIf="
                        form['idProducto'].touched && form['idProducto'].invalid
                      "
                    >
                      <div
                        *ngIf="
                          form['idProducto'].errors &&
                          form['idProducto'].errors['required']
                        "
                      >
                        * idProduco es Requerido.
                      </div>
                    </div>
                  </div>
                  <div
                    class="input-group mb-1"
                    *ngIf="createForm.value.idProducto != ''"
                  >
                    <span class="input-group-text izq" id="plazo"
                      ><b>Categoria Programatica</b></span
                    >
                    <ngx-select
                      class="sel"
                      [allowClear]="true"
                      [items]="catProgras"
                      optionTextField="proyect_acti"
                      optionValueField="cat_programatica"
                      placeholder="Seleccione Una Categoria Programatica"
                      formControlName="catProgra"
                      (select)="doSelect($event)"
                    >
                      <ng-template
                        ngx-select-option
                        ngx-select-option-selected
                        let-option
                        let-text="text"
                      >
                        <span [innerHtml]="text"></span>
                        &nbsp;- {{ option.data.cat_programatica }}
                      </ng-template>
                    </ngx-select>

                    <div
                      class="form-text"
                      *ngIf="
                        form['catProgra'].touched && form['catProgra'].invalid
                      "
                    >
                      <div
                        *ngIf="
                          form['catProgra'].errors &&
                          form['catProgra'].errors['required']
                        "
                      >
                        * Debe seleccionar Una Categoria Programatica.
                      </div>
                    </div>
                  </div>

                 <!--  <div
                    class="input-group mb-1"
                    *ngIf="createForm.value.idProducto != ''"
                  >
                    <span class="input-group-text izq" id="plazo"
                      ><b>Tipo de Gasto</b></span
                    >
                    <ngx-select
                      class="sel"
                      [allowClear]="true"
                      [items]="gastoFondos"
                      optionTextField="denominacion"
                      optionValueField="_id"
                      placeholder="Seleccione un tipo de gasto"
                      formControlName="idGastoFondo"
                    >
                      <ng-template
                        ngx-select-option
                        ngx-select-option-selected
                        let-option
                        let-text="text"
                      >
                        <span [innerHtml]="text"></span>
                      </ng-template>
                    </ngx-select>
                    <div
                      class="form-text"
                      *ngIf="
                        form['idGastoFondo'].touched &&
                        form['idGastoFondo'].invalid
                      "
                    >
                      <div
                        *ngIf="
                          form['idGastoFondo'].errors &&
                          form['idGastoFondo'].errors['required']
                        "
                      >
                        * Debe seleccionar tipo de gasto.
                      </div>
                    </div>
                  </div> -->

                <!--   <div
                    class="input-group mb-1"
                    *ngIf="createForm.value.idProducto != ''"
                  >
                    <span class="input-group-text izq" id="plazo"
                      ><b>Tipo de Fondo</b></span
                    >
                    <ngx-select
                      class="sel"
                      [allowClear]="true"
                      [items]="desembolsos"
                      optionTextField="numDesembolso"
                      optionValueField="_id"
                      placeholder="Seleccione Desembolso N째"
                      formControlName="idDesembolso"
                     
                    >
                      <ng-template
                        ngx-select-option
                        ngx-select-option-selected
                        let-option
                        let-text="text"
                      >
                        <span [innerHtml]="text"></span>
                        &nbsp;{{ option.data.tipoDesembolso }}
                      </ng-template>
                    </ngx-select>
                    <div
                      class="form-text"
                      *ngIf="
                        form['idDesembolso'].touched &&
                        form['idDesembolso'].invalid
                      "
                    >
                      <div
                        *ngIf="
                          form['idDesembolso'].errors &&
                          form['idDesembolso'].errors['required']
                        "
                      >
                        * Debe seleccionar el N째 de tipo fondo.
                      </div>
                    </div>
                  </div> -->
                  <div
                    class="input-group mb-1"
                    *ngIf="createForm.value.idProducto != ''"
                  >
                    <span class="input-group-text izq" id="plazo"
                      ><b>F.F.- O.F.</b></span
                    >
                    <ngx-select
                      class="sel"
                      [allowClear]="true"
                      [items]="fuentes"
                      optionTextField="ffof"
                      optionValueField="_id"
                      placeholder="Seleccione Desembolso N째"
                      formControlName="idFuente"
                    >
                      <ng-template
                        ngx-select-option
                        ngx-select-option-selected
                        let-option
                        let-text="text"
                      >
                        <span [innerHtml]="text"></span>
                        &nbsp;{{ option.data.denominacion }}
                      </ng-template>
                    </ngx-select>
                    <div
                      class="form-text"
                      *ngIf="
                        form['idFuente'].touched &&
                        form['idFuente'].invalid
                      "
                    >
                      <div
                        *ngIf="
                          form['idFuente'].errors &&
                          form['idFuente'].errors['required']
                        "
                      >
                        * Debe seleccionar desembolso N째.
                      </div>
                    </div>
                  </div>

                  <div class="input-group mb-1">
                    <span class="input-group-text izq" id="precio"
                      ><b>Monto (Bs) *</b></span
                    >
                    <input
                      id="precio"
                      class="form-control"
                      type="number"
                      formControlName="precio"
                      (keyup)="calcularStock()"
                    />
                    <div
                      class="form-text"
                      *ngIf="form['precio'].touched && form['precio'].invalid"
                    >
                      <div
                        *ngIf="
                          form['precio'].errors &&
                          form['precio'].errors['required']
                        "
                      >
                        * El precio es Requerido.
                      </div>
                      <div
                        *ngIf="
                          form['precio'].errors &&
                          form['precio'].errors['minlength']
                        "
                      >
                        * El precio no puede tener menos de 3 caracteres.
                      </div>
                    </div>
                  </div>

                  <div class="input-group mb-1">
                    <span class="input-group-text izq" id="plazo"
                      ><b>Vehiculo</b></span
                    >
                    <ngx-select
                      class="sel"
                      [allowClear]="true"
                      [items]="vehiculos"
                      optionTextField="placa"
                      optionValueField="_id"
                      placeholder="Seleccione un Vehiculo"
                      formControlName="vehiculo"
                      (select)="doSelect($event)"
                    >
                      <ng-template
                        ngx-select-option
                        ngx-select-option-selected
                        let-option
                        let-text="text"
                      >
                        <span [innerHtml]="text"></span>
                        &nbsp;- {{ option.data.marca }} &nbsp;-
                        {{ option.data.tipo }}
                      </ng-template>
                    </ngx-select>

                    <div
                      class="form-text"
                      *ngIf="
                        form['vehiculo'].touched && form['vehiculo'].invalid
                      "
                    >
                      <div
                        *ngIf="
                          form['vehiculo'].errors &&
                          form['vehiculo'].errors['required']
                        "
                      >
                        * Debe seleccionar una Vehiculo.
                      </div>
                    </div>
                  </div>

                  <div class="input-group mb-1">
                    <span class="input-group-text izq" id="plazo"
                      ><b>Conductor</b></span
                    >
                    <ngx-select
                      class="sel"
                      [allowClear]="true"
                      [items]="conductores"
                      optionTextField="username"
                      optionValueField="_id"
                      placeholder="Seleccione un Conductor"
                      formControlName="conductor"
                      (select)="doSelect($event)"
                    >
                      <ng-template
                        ngx-select-option
                        ngx-select-option-selected
                        let-option
                        let-text="text"
                      >
                        <span [innerHtml]="text"></span>
                        &nbsp;{{ option.data.surnames }}
                      </ng-template>
                    </ngx-select>

                    <div
                      class="form-text"
                      *ngIf="
                        form['conductor'].touched && form['conductor'].invalid
                      "
                    >
                      <div
                        *ngIf="
                          form['conductor'].errors &&
                          form['conductor'].errors['required']
                        "
                      >
                        * Debe seleccionar un conductor.
                      </div>
                    </div>
                  </div>

                  <div class="input-group mb-1">
                    <span class="input-group-text izq" id="plazo"
                      ><b>Fecha de Salida *</b></span
                    >
                    <input
                      type="date"
                      class="form-control"
                      id="fecha"
                      formControlName="fecha"
                    />
                    <div
                      class="form-text"
                      *ngIf="form['fecha'].touched && form['fecha'].invalid"
                    >
                      <div
                        *ngIf="
                          form['fecha'].errors &&
                          form['fecha'].errors['required']
                        "
                      >
                        * Hora de Salida es Requerido.
                      </div>
                    </div>
                  </div>

                  <div class="input-group mb-1">
                    <span class="input-group-text izq" id="destino"
                      ><b>Destino *</b></span
                    >
                    <input
                      id="destino"
                      class="form-control"
                      type="text"
                      formControlName="destino"
                    />
                    <div
                      class="form-text"
                      *ngIf="form['destino'].touched && form['destino'].invalid"
                    >
                      <div
                        *ngIf="
                          form['destino'].errors &&
                          form['destino'].errors['required']
                        "
                      >
                        * El Destino es Requerido.
                      </div>
                      <div
                        *ngIf="
                          form['destino'].errors &&
                          form['destino'].errors['minlength']
                        "
                      >
                        * El Destino no puede tener menos de 3 caracteres.
                      </div>
                    </div>
                  </div>

                  <div class="input-group mb-1">
                    <span class="input-group-text izq" id="motivo"
                      ><b>Motivo *</b></span
                    >
                    <input
                      id="motivo"
                      class="form-control"
                      type="text"
                      formControlName="motivo"
                    />
                    <div
                      class="form-text"
                      *ngIf="form['motivo'].touched && form['motivo'].invalid"
                    >
                      <div
                        *ngIf="
                          form['motivo'].errors &&
                          form['motivo'].errors['required']
                        "
                      >
                        * El motivo es Requerido.
                      </div>
                      <div
                        *ngIf="
                          form['motivo'].errors &&
                          form['motivo'].errors['minlength']
                        "
                      >
                        * El motivo no puede tener menos de 3 caracteres.
                      </div>
                    </div>
                  </div>

                  <div class="mt-3 d-flex justify-content-around">
                    <button
                      (click)="cancel()"
                      type="reset"
                      class="btn btn-danger"
                    >
                      Cancelar
                    </button>
                    <button
                      [disabled]="createForm.invalid"
                      type="submit"
                      class="btn btn-primary"
                      appLoader
                    >
                      Registrar
                    </button>
                  </div>
                </form>
                {{ createForm.value | json }}
              </div>
            </div>
          </div>
          <!-- /.card-body -->
        </div>
        <!-- /.card -->
      </div>
    </div>
  </div>
</div>
